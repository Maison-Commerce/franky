{% schema %}
{
  "name": "Collection Navigation",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_left_desktop",
      "min": 0,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Padding Left (Desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_right_desktop",
      "min": 0,
      "max": 150,
      "step": 5,
      "unit": "px",
      "label": "Padding Right (Desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_left_mobile",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Padding Left (Mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_right_mobile",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Padding Right (Mobile)",
      "default": 0
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "range",
      "id": "button_gap",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Button Gap",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 8,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button Padding Vertical",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Button Padding Horizontal",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 4,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Button Border Radius",
      "default": 12
    },
    {
      "type": "color",
      "id": "button_active_bg_color",
      "label": "Active Button Background Color",
      "default": "#2E432F"
    },
    {
      "type": "color",
      "id": "button_active_text_color",
      "label": "Active Button Text Color",
      "default": "#FBFBFB"
    },
    {
      "type": "color",
      "id": "button_inactive_bg_color",
      "label": "Inactive Button Background Color",
      "default": "transparent"
    },
    {
      "type": "color",
      "id": "button_inactive_text_color",
      "label": "Inactive Button Text Color",
      "default": "#32432E"
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 18,
      "step": 1,
      "unit": "px",
      "label": "Button Font Size",
      "default": 14
    }
  ],
  "blocks": [
    {
      "type": "collection_button",
      "name": "Collection Button",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Button Label",
          "default": "All Products"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection Navigation",
      "blocks": [
        {
          "type": "collection_button",
          "settings": {
            "label": "All Products"
          }
        },
        {
          "type": "collection_button",
          "settings": {
            "label": "Energy & Focus"
          }
        },
        {
          "type": "collection_button",
          "settings": {
            "label": "Sleep & Calm"
          }
        },
        {
          "type": "collection_button",
          "settings": {
            "label": "Passion & Libido"
          }
        },
        {
          "type": "collection_button",
          "settings": {
            "label": "Beauty & Glow"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<div class="collection-navigation" style="background-color: {{ section.settings.section_bg_color }}; padding-top: {{ section.settings.padding_top_desktop }}px; padding-bottom: {{ section.settings.padding_bottom_desktop }}px; padding-left: {{ section.settings.padding_left_desktop }}px; padding-right: {{ section.settings.padding_right_desktop }}px;">
  <div class="collection-navigation__container">
    {% if section.blocks.size > 0 %}
      <div class="collection-navigation__wrapper">
        <div class="collection-navigation__buttons">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'collection_button' %}
                {% assign is_active = false %}
                {% if block.settings.collection %}
                  {% assign collection_url = block.settings.collection.url %}
                  {% if collection.handle == block.settings.collection.handle %}
                    {% assign is_active = true %}
                  {% endif %}
                {% else %}
                  {% assign collection_url = '/' %}
                  {% unless collection %}
                    {% assign is_active = true %}
                  {% endunless %}
                {% endif %}
                
                <a
                  href="{{ collection_url }}"
                  class="collection-navigation__button{% if is_active %} collection-navigation__button--active{% endif %}"
                  {{ block.shopify_attributes }}
                >
                  {{ block.settings.label }}
                </a>
            {% endcase %}
          {% endfor %}
        </div>
      </div>
    {% else %}
      <div class="collection-navigation__empty">
        <p>Please add collection buttons to display.</p>
      </div>
    {% endif %}
  </div>
</div>

<style>
  .collection-navigation {
    width: 100%;
    margin-top: 36px;
    background-color: {{ section.settings.section_bg_color }};
  }

  @media (max-width: 749px) {
    .collection-navigation {
      padding-top: {{ section.settings.padding_top_mobile }}px !important;
      padding-bottom: {{ section.settings.padding_bottom_mobile }}px !important;
      padding-left: {{ section.settings.padding_left_mobile }}px !important;
      padding-right: {{ section.settings.padding_right_mobile }}px !important;
      margin-top: 32px;
    }
  }

  .collection-navigation__container {
    max-width: 1440px;
    margin: 0 auto;
    width: 100%;
  }

  .collection-navigation__wrapper {
    width: 100%;
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .collection-navigation__wrapper::-webkit-scrollbar {
    display: none;
  }

  .collection-navigation__buttons {
    display: flex;
    flex-direction: row;
    align-items: stretch;
    gap: {{ section.settings.button_gap }}px;
    width: 100%;
    padding: 0 80px;
  }

  @media (max-width: 749px) {
    .collection-navigation__buttons {
      width: max-content;
      min-width: 100%;
      padding: 0 20px;
    }
  }

  .collection-navigation__button {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    padding: {{ section.settings.button_padding_vertical }}px {{ section.settings.button_padding_horizontal }}px;
    background-color: {{ section.settings.button_inactive_bg_color }};
    border-radius: {{ section.settings.button_border_radius }}px;
    font-family: "Neue Haas Grotesk Display Pro", sans-serif;
    font-size: {{ section.settings.button_font_size }}px;
    font-weight: 500;
    line-height: 1.5;
    color: {{ section.settings.button_inactive_text_color }};
    transition: background-color 0.2s ease, color 0.2s ease;
    flex: 1;
    min-width: 0;
    white-space: nowrap;
  }

  @media (max-width: 749px) {
    .collection-navigation__button {
      flex: none;
      min-width: auto;
    }
  }

  .collection-navigation__button:hover {
    opacity: 0.8;
  }

  .collection-navigation__button--active {
    background-color: {{ section.settings.button_active_bg_color }};
    color: {{ section.settings.button_active_text_color }};
    text-decoration: none;
  }

  .collection-navigation__button--active:hover {
    opacity: 1;
  }

  .collection-navigation__empty {
    text-align: center;
    padding: 40px 20px;
    color: #98A2B3;
  }
</style>

